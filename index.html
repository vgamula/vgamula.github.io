<html>
<head>
	<meta charset="utf-8">
	<title>Дискретні структури</title>
	<script src='http://code.jquery.com/jquery-latest.min.js' type='text/javascript'></script>

	
</head>
<body>
	<h2>Make invert table:</h2>
	<form>
		source
		<input type="text" maxlength="10" id="source"><br><br>
		invert
		<input type="text" maxlength="10" id="invert">
	</form>

<script type="text/javascript">

	function makeInvert(value) {
		var array = [];
		var invertArr = [];
		var isCorrect = true;
		for (var i = 0; i < value.length; i++) {
			array.push(parseInt(value[i]));
		};

		for (var i = 0; i < array.length; i++) {
			if (array.indexOf(array[i]) != array.lastIndexOf(array[i])) {
				return "Не повинно бути повторень!";
			}
		};
		console.log(array);	
		var i = 0;
		while (array.length != 0) {
			var index = array.indexOf(i);
			if (index != -1) {
				invertArr.push(index);
				array.splice(index, 1);
			} 
			i++;
		}
		return invertArr.join('');	
	}

	function makeSource(value) {
		var array = [];
		for (var i = value.length-1; i >=0 ; i--) {
			if (array.length == 0) {
				array.push(i+1);
				continue;
			}
			var tmp = parseInt(value[i]);
			if (tmp >= array.length) {
				array.push(i+1);
			} else {
				array.splice(tmp, 0, i+1);
			}
		};
		return array.join("");
	}


	$("#source").keyup(function() {
		var a = $("#source").val();
		$("#invert").val(makeInvert(a));
		});

	$("#invert").keyup(function() {
		var a = $("#invert").val();
		$("#source").val(makeSource(a));
		});


	var keyValidate = function (e) {
	        if ($.inArray(e.keyCode, [46, 8, 9, 27, 13, 190]) !== -1 ||
	            (e.keyCode == 65 && e.ctrlKey === true) || 
	            (e.keyCode >= 35 && e.keyCode <= 39)) {
	                 return;
	        }
	        // Ensure that it is a number and stop the keypress
	        if ((e.shiftKey || (e.keyCode < 48 || e.keyCode > 57)) && (e.keyCode < 96 || e.keyCode > 105)) {
	            e.preventDefault();
	        }
	    };

	$(document).ready(function() {
		$("#source").keydown(keyValidate);
		$("#invert").keydown(keyValidate);
	});


</script>
</body>
</html>